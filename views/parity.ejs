<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="./stylesheets/resetcss.css">
    <link rel="stylesheet" href="./stylesheets/style.css">
    <link rel="stylesheet" href="./stylesheets/bootstrap.min.css">
    <script src="./javascripts/jquery.min.js"></script>

    <style>
        .btn:active:focus,
        .btn:active.focus,
        .btn.active:focus,
        .btn.active.focus,
        .btn:focus,
        .btn.foucs {
            box-shadow: none;
            outline: none;
            color: #b3b3b3;
        }

        .btn {
            color: black;
        }

        .btn:hover {
            color: #b3b3b3;
        }

        #v-tab {
            width: 10vw;
            margin: 90px 20px 0 0;
        }

        .nav-link {
            font-size: 1vw;
        }

        .row {
            width: 88vw;
            margin-top: 74px;
            z-index: -1;
        }

        p {
            margin-bottom: 0;
        }

        .table {
            margin-top: 110px;
            word-break: break-all;
            display: table;
            table-layout:fixed;
        }

        .table img {
            width: 10vw;
            height: 10vw;
        }
        table th{
            width:15vw;
        }
        #deleteButton{
             margin-bottom: 8vw;
             float:right;
        }

    </style>

</head>

<body>

    <!-- 導覽列 -->
    <%- include("./shared/header.ejs") %>


        <div class="d-flex align-items-start  ">
            <!-- 商品導覽列 -->
            <div class="nav flex-column " id="v-tab">
                <% for(var i=0; i<prodListId.length; i++) { %>
                    <button class="nav-link btn btn-light btn-sm" type="button" data-bs-toggle="tab"
                        id="<%= prodListId[i] %>" data-bs-target="<%= prodListTarget[i] %>">
                        <%= prodList[i] %>
                    </button>
                    <% } %>
            </div>
            <!-- <div class="nav flex-column " id="v-tab">
            <button class="nav-link btn btn-light btn-sm" id="v-allItems-tab" data-bs-toggle="tab"
                data-bs-target="#v-allItems" type="button">所有商品</button>
            <button class="nav-link btn btn-light btn-sm" id="v-motherboard-tab" data-bs-toggle="tab"
                data-bs-target="#v-motherboard" type="button">主機板</button>
            <button class="nav-link btn btn-light btn-sm" id="v-Memory-tab" data-bs-toggle="tab"
                data-bs-target="#v-Memory" type="button">記憶體</button>
            <button class="nav-link btn btn-light btn-sm" id="v-PowerSupplier-tab" data-bs-toggle="tab"
                data-bs-target="#v-PowerSupplier" type="button">電源供應器</button>
            <button class="nav-link btn btn-light btn-sm" id="v-graphicsCard-tab" data-bs-toggle="tab"
                data-bs-target="#v-graphicsCard" type="button">顯示卡</button>
            <button class="nav-link btn btn-light btn-sm" id="v-CPU-tab" data-bs-toggle="tab" data-bs-target="#v-CPU"
                type="button">CPU</button>
        </div> -->

            <!-- 商品內容 -->
            <div class="tab-content  " id="v-tabContent">
                <!-- 所有商品頁面 -->
                <div class="tab-pane active " id="v-allItems">
                    <div class="container ">
                        <% if(session){ %>
                        <table class="table table-bordered text-center table-hover">
                            <thead style="background-color: #e8e8e8;">
                                <tr>
                                    <th scope="col" style="width:7vw;" ><%= parity[0] %></th>
                                    <% for(var k=0; k<prod.length; k++) { %>
                                        <th scope="col"><%= prod[k][0] %></th>
                                    <% } %>     
                                </tr>
                            </thead>
                            <tbody>
                                    <% for(var i=0; i<parity.length ; i++) { %>
                                        <% if( i!=0 ) {%>
                                            <tr>
                                        <% } %> 
                                        <% for(var k=0; k<prod.length +1; k++) { %>
                                            <% if( k==0 && i!=0 ) {%>
                                                <th scope="row"><%= parity[i] %></th>
                                            <% } %> 
                                            <% if(k>0 && i>0) {%>
                                                <% if(i==1) {%>
                                                    <td> <img src="<%= prod[k-1][i] %>" alt="...">
                                                    <button type="button" class="btn btn-outline-dark prod" id="deleteButton" data-id="<%= prodId[i] %>" >X</button></td>
                                                <% } else{ %>  
                                                    <td><%- prod[k-1][i] %></td>
                                                <% } %> 
                                            <% } %>
                                        <% } %>   
                                        <% if( i!=0 ) {%>
                                            </tr>
                                        <% } %>  
                                    <% } %>
                            </tbody>
                        </table>
                        <% } %>
                    </div>
                </div>
                <!-- 主機板頁面 -->
                <div class="tab-pane " id="v-motherboard">
                    <div class="container ">

                    </div>
                </div>
                <!-- 記憶體頁面 -->
                <div class="tab-pane " id="v-Memory">
                    <div class="container ">

                    </div>
                </div>
                <!-- 電源供應器頁面 -->
                <div class="tab-pane " id="v-PowerSupplier">
                    <div class="container ">

                    </div>
                </div>
                <!-- 顯示卡頁面 -->
                <div class="tab-pane " id="v-graphicsCard">
                    <div class="container ">

                    </div>
                </div>
                <!-- CPU頁面 -->
                <div class="tab-pane " id="v-CPU">
                    <div class="container ">

                    </div>
                </div>
            </div>
        </div>


        <!-- footer -->
        <%- include("./shared/footer.ejs") %>



            <script src="./javascripts/slide.js"></script>
            <script src="./javascripts/footerPosition.js"></script>
            <script src="./javascripts/bootstrap.bundle.min.js"></script>
            <script src="./javascripts/bootstrap.bundle.min.js.map"></script>
            <script>
                // 切換按鈕更改footer位置
                $("button").click(function () {
                    footerPosition();
                });

                $("button.prod").click(function(){
                    var API="http://localhost:3001/parity/delete"
                    var payload = { prodId:this.dataset.id };
                $.post(API,payload,function(data,status){
                    alert(data);
                    })
                })
            </script>
</body>

</html>